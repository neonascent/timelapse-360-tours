<krpano>

	<action name="startup" autorun="onstart">
		
		if(device.panovideosupport == false,
			error('Sorry, but panoramic videos are not supported by your current browser!');
		  ,
			loadscene(videopano);
		  );
	</action>

	<scene name="videopano" title="Trafalgar St Tunnel">

		<!-- include the videoplayer interface / skin (with VR support) -->
		<include url="skin/videointerface.xml" />
		<include url="actions.xml" />

		
		
		<view hlookat="0" vlookat="0" fovtype="dfov" fov="120.000" maxpixelzoom="2.0" fovmin="70" fovmax="120" limitview="auto" />

		<preview url="" />
		
		<!-- include the videoplayer plugin -->
		<plugin name="video"
			url.flash="%SWFPATH%/plugins/videoplayer.swf"
			url.html5="%SWFPATH%/plugins/videoplayer.js"

			posterurl="videos/VR_PanoramaHDold-1024-5000kps.png"
		    volume="1.0"
			pausedonstart="false"
			loop="true"
			enabled="false"
			zorder="0"
			align="center" ox="0" oy="0"
			
			onloaded="add_video_sources();"
			
			width.no-panovideosupport="100%"
			height.no-panovideosupport="prop" />

		<!-- the panoramic video image -->
		<image devices="panovideosupport">
			<sphere url="plugin:video" />
		</image>

		<!-- add the video sources and play the video -->
		<action name="add_video_sources">
			videointerface_clear();
			videointerface_addsource('2010', 'videos/VR_PanoramaHD2010-1024.mp4', 'videos/VR_PanoramaHD2010/img');
			videointerface_addsource('Feb 2014', 'videos/VR_PanoramaHDold-1024-5000kps.mp4', 'videos/VR_PanoramaHDold/img');
			videointerface_addsource('Sep 2014', 'videos/VR_PanoramaHDnew-1024-35pc.mp4', 'videos/VR_PanoramaHDnew/img');
			
			js(startWithParameters('Feb 2014'));
			<!--if(device.ios,-->
				<!-- iOS Safari has a very slow 'video-to-webgl-texture' transfer, therefore use a low-res video by default -->
				<!--videointerface_play('480p');
			  ,
				videointerface_play('1440p');
			  );-->
		</action>		

	</scene>

</krpano>

